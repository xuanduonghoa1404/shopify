{"ast":null,"code":"import { Key } from '../../../../types.js';\nimport React$1, { Component, createRef } from 'react';\nimport debounce$1 from 'lodash/debounce';\nimport { EventListener as EventListener$1 } from '../../../EventListener/EventListener.js';\nimport { FeaturesContext } from '../../../../utilities/features/context.js';\nimport { classNames } from '../../../../utilities/css.js';\nimport isEqual$1 from 'lodash/isEqual';\nimport { labelID } from '../../../Label/Label.js';\nimport { Labelled as Labelled$1 } from '../../../Labelled/Labelled.js';\nimport { CSS_VAR_PREFIX } from '../../utilities/index.js';\nimport styles from './DualThumb.scss.js';\nvar Control;\n\n(function (Control) {\n  Control[Control[\"Lower\"] = 0] = \"Lower\";\n  Control[Control[\"Upper\"] = 1] = \"Upper\";\n})(Control || (Control = {}));\n\nclass DualThumb extends Component {\n  constructor(...args) {\n    super(...args);\n    this.context = void 0;\n    this.state = {\n      value: sanitizeValue(this.props.value, this.props.min, this.props.max, this.props.step),\n      trackWidth: 0,\n      trackLeft: 0\n    };\n    this.track = /*#__PURE__*/createRef();\n    this.trackWrapper = /*#__PURE__*/createRef();\n    this.thumbLower = /*#__PURE__*/createRef();\n    this.thumbUpper = /*#__PURE__*/createRef();\n    this.setTrackPosition = debounce$1(() => {\n      if (this.track.current) {\n        var thumbSize = 16;\n        var {\n          width,\n          left\n        } = this.track.current.getBoundingClientRect();\n        var adjustedTrackWidth = width - thumbSize;\n        var adjustedTrackLeft = left + thumbSize / 2;\n        var range = this.props.max - this.props.min;\n        var minValuePosition = this.props.min / range * adjustedTrackWidth;\n        this.setState({\n          trackWidth: adjustedTrackWidth,\n          trackLeft: adjustedTrackLeft - minValuePosition\n        });\n      }\n    }, 40, {\n      leading: true,\n      trailing: true,\n      maxWait: 40\n    });\n\n    this.handleMouseDownThumbLower = event => {\n      if (event.button !== 0 || this.props.disabled) return;\n      registerMouseMoveHandler(this.handleMouseMoveThumbLower);\n      event.stopPropagation();\n    };\n\n    this.handleMouseMoveThumbLower = event => {\n      var valueUpper = this.state.value[1];\n      this.setValue([this.actualXPosition(event.clientX), valueUpper], Control.Upper);\n    };\n\n    this.handleTouchStartThumbLower = event => {\n      if (this.props.disabled) return;\n      registerTouchMoveHandler(this.handleTouchMoveThumbLower);\n      event.stopPropagation();\n    };\n\n    this.handleTouchMoveThumbLower = event => {\n      event.preventDefault();\n      var valueUpper = this.state.value[1];\n      this.setValue([this.actualXPosition(event.touches[0].clientX), valueUpper], Control.Upper);\n    };\n\n    this.handleMouseDownThumbUpper = event => {\n      if (event.button !== 0 || this.props.disabled) return;\n      registerMouseMoveHandler(this.handleMouseMoveThumbUpper);\n      event.stopPropagation();\n    };\n\n    this.handleMouseMoveThumbUpper = event => {\n      var valueLower = this.state.value[0];\n      this.setValue([valueLower, this.actualXPosition(event.clientX)], Control.Lower);\n    };\n\n    this.handleTouchStartThumbUpper = event => {\n      if (this.props.disabled) return;\n      registerTouchMoveHandler(this.handleTouchMoveThumbUpper);\n      event.stopPropagation();\n    };\n\n    this.handleTouchMoveThumbUpper = event => {\n      event.preventDefault();\n      var valueLower = this.state.value[0];\n      this.setValue([valueLower, this.actualXPosition(event.touches[0].clientX)], Control.Lower);\n    };\n\n    this.handleKeypressLower = event => {\n      if (this.props.disabled) return;\n      var {\n        incrementValueLower,\n        decrementValueLower\n      } = this;\n      var handlerMap = {\n        [Key.UpArrow]: incrementValueLower,\n        [Key.RightArrow]: incrementValueLower,\n        [Key.DownArrow]: decrementValueLower,\n        [Key.LeftArrow]: decrementValueLower\n      };\n      var handler = handlerMap[event.keyCode];\n\n      if (handler != null) {\n        event.preventDefault();\n        event.stopPropagation();\n        handler();\n      }\n    };\n\n    this.handleKeypressUpper = event => {\n      if (this.props.disabled) return;\n      var {\n        incrementValueUpper,\n        decrementValueUpper\n      } = this;\n      var handlerMap = {\n        [Key.UpArrow]: incrementValueUpper,\n        [Key.RightArrow]: incrementValueUpper,\n        [Key.DownArrow]: decrementValueUpper,\n        [Key.LeftArrow]: decrementValueUpper\n      };\n      var handler = handlerMap[event.keyCode];\n\n      if (handler != null) {\n        event.preventDefault();\n        event.stopPropagation();\n        handler();\n      }\n    };\n\n    this.incrementValueLower = () => {\n      this.setValue([this.state.value[0] + this.props.step, this.state.value[1]], Control.Upper);\n    };\n\n    this.decrementValueLower = () => {\n      this.setValue([this.state.value[0] - this.props.step, this.state.value[1]], Control.Upper);\n    };\n\n    this.incrementValueUpper = () => {\n      this.setValue([this.state.value[0], this.state.value[1] + this.props.step], Control.Lower);\n    };\n\n    this.decrementValueUpper = () => {\n      this.setValue([this.state.value[0], this.state.value[1] - this.props.step], Control.Lower);\n    };\n\n    this.dispatchValue = () => {\n      var {\n        onChange,\n        id\n      } = this.props;\n      var {\n        value\n      } = this.state;\n      onChange(value, id);\n    };\n\n    this.setValue = (dirtyValue, control) => {\n      var {\n        props: {\n          min,\n          max,\n          step\n        },\n        state: {\n          value\n        }\n      } = this;\n      var sanitizedValue = sanitizeValue(dirtyValue, min, max, step, control);\n\n      if (isEqual$1(sanitizedValue, value) === false) {\n        this.setState({\n          value: sanitizedValue\n        }, this.dispatchValue);\n      }\n    };\n\n    this.handleMouseDownTrack = event => {\n      if (event.button !== 0 || this.props.disabled) return;\n      event.preventDefault();\n      var clickXPosition = this.actualXPosition(event.clientX);\n      var {\n        value\n      } = this.state;\n      var distanceFromLowerThumb = Math.abs(value[0] - clickXPosition);\n      var distanceFromUpperThumb = Math.abs(value[1] - clickXPosition);\n\n      if (distanceFromLowerThumb <= distanceFromUpperThumb) {\n        this.setValue([clickXPosition, value[1]], Control.Upper);\n        registerMouseMoveHandler(this.handleMouseMoveThumbLower);\n\n        if (this.thumbLower.current != null) {\n          this.thumbLower.current.focus();\n        }\n      } else {\n        this.setValue([value[0], clickXPosition], Control.Lower);\n        registerMouseMoveHandler(this.handleMouseMoveThumbUpper);\n\n        if (this.thumbUpper.current != null) {\n          this.thumbUpper.current.focus();\n        }\n      }\n    };\n\n    this.handleTouchStartTrack = event => {\n      if (this.props.disabled) return;\n      event.preventDefault();\n      var clickXPosition = this.actualXPosition(event.touches[0].clientX);\n      var {\n        value\n      } = this.state;\n      var distanceFromLowerThumb = Math.abs(value[0] - clickXPosition);\n      var distanceFromUpperThumb = Math.abs(value[1] - clickXPosition);\n\n      if (distanceFromLowerThumb <= distanceFromUpperThumb) {\n        this.setValue([clickXPosition, value[1]], Control.Upper);\n        registerTouchMoveHandler(this.handleTouchMoveThumbLower);\n\n        if (this.thumbLower.current != null) {\n          this.thumbLower.current.focus();\n        }\n      } else {\n        this.setValue([value[0], clickXPosition], Control.Lower);\n        registerTouchMoveHandler(this.handleTouchMoveThumbUpper);\n\n        if (this.thumbUpper.current != null) {\n          this.thumbUpper.current.focus();\n        }\n      }\n    };\n\n    this.actualXPosition = dirtyXPosition => {\n      if (this.track.current) {\n        var {\n          min,\n          max\n        } = this.props;\n        var {\n          trackLeft,\n          trackWidth\n        } = this.state;\n        var relativeX = dirtyXPosition - trackLeft;\n        var percentageOfTrack = relativeX / trackWidth;\n        return percentageOfTrack * (max - min);\n      } else {\n        return 0;\n      }\n    };\n  }\n\n  static getDerivedStateFromProps(props, state) {\n    var {\n      min,\n      step,\n      max,\n      value,\n      onChange,\n      id\n    } = props;\n    var {\n      prevValue\n    } = state;\n\n    if (isEqual$1(prevValue, value)) {\n      return null;\n    }\n\n    var sanitizedValue = sanitizeValue(value, min, max, step);\n\n    if (!isEqual$1(value, sanitizedValue)) {\n      onChange(sanitizedValue, id);\n    }\n\n    return {\n      prevValue: value,\n      value: sanitizedValue\n    };\n  }\n\n  componentDidMount() {\n    this.setTrackPosition();\n\n    if (this.trackWrapper.current != null) {\n      this.trackWrapper.current.addEventListener('touchstart', this.handleTouchStartTrack, {\n        passive: false\n      });\n    }\n  }\n\n  componentWillUnmount() {\n    if (this.trackWrapper.current != null) {\n      this.trackWrapper.current.removeEventListener('touchstart', this.handleTouchStartTrack);\n    }\n  }\n\n  render() {\n    var {\n      id,\n      min,\n      max,\n      prefix,\n      suffix,\n      disabled,\n      output,\n      error,\n      onFocus,\n      onBlur,\n      label,\n      labelAction,\n      labelHidden,\n      helpText\n    } = this.props;\n    var {\n      value\n    } = this.state;\n    var idLower = id;\n    var idUpper = \"\".concat(id, \"Upper\");\n    var describedBy = [];\n\n    if (error) {\n      describedBy.push(\"\".concat(id, \"Error\"));\n    }\n\n    var ariaDescribedBy = describedBy.length ? describedBy.join(' ') : undefined;\n    var trackWrapperClassName = classNames(styles.TrackWrapper, error && styles.error, disabled && styles.disabled);\n    var thumbLowerClassName = classNames(styles.Thumbs, styles.ThumbLower, disabled && styles.disabled);\n    var thumbUpperClassName = classNames(styles.Thumbs, styles.ThumbUpper, disabled && styles.disabled);\n    var trackWidth = this.state.trackWidth;\n    var range = max - min;\n    var minValuePosition = min / range * trackWidth;\n    var leftPositionThumbLower = value[0] / range * trackWidth - minValuePosition;\n    var leftPositionThumbUpper = value[1] / range * trackWidth - minValuePosition;\n    var outputLowerClassName = classNames(styles.Output, styles.OutputLower);\n    var outputMarkupLower = !disabled && output ? /*#__PURE__*/React$1.createElement(\"output\", {\n      htmlFor: idLower,\n      className: outputLowerClassName,\n      style: {\n        left: \"\".concat(leftPositionThumbLower, \"px\")\n      }\n    }, /*#__PURE__*/React$1.createElement(\"div\", {\n      className: styles.OutputBubble\n    }, /*#__PURE__*/React$1.createElement(\"span\", {\n      className: styles.OutputText\n    }, value[0]))) : null;\n    var outputUpperClassName = classNames(styles.Output, styles.OutputUpper);\n    var outputMarkupUpper = !disabled && output ? /*#__PURE__*/React$1.createElement(\"output\", {\n      htmlFor: idUpper,\n      className: outputUpperClassName,\n      style: {\n        left: \"\".concat(leftPositionThumbUpper, \"px\")\n      }\n    }, /*#__PURE__*/React$1.createElement(\"div\", {\n      className: styles.OutputBubble\n    }, /*#__PURE__*/React$1.createElement(\"span\", {\n      className: styles.OutputText\n    }, value[1]))) : null;\n    var cssVars = {\n      [\"\".concat(CSS_VAR_PREFIX, \"progress-lower\")]: \"\".concat(leftPositionThumbLower, \"px\"),\n      [\"\".concat(CSS_VAR_PREFIX, \"progress-upper\")]: \"\".concat(leftPositionThumbUpper, \"px\")\n    };\n    var prefixMarkup = prefix && /*#__PURE__*/React$1.createElement(\"div\", {\n      className: styles.Prefix\n    }, prefix);\n    var suffixMarkup = suffix && /*#__PURE__*/React$1.createElement(\"div\", {\n      className: styles.Suffix\n    }, suffix);\n    return /*#__PURE__*/React$1.createElement(React$1.Fragment, null, /*#__PURE__*/React$1.createElement(Labelled$1, {\n      id: id,\n      label: label,\n      error: error,\n      action: labelAction,\n      labelHidden: labelHidden,\n      helpText: helpText\n    }, /*#__PURE__*/React$1.createElement(\"div\", {\n      className: styles.Wrapper\n    }, prefixMarkup, /*#__PURE__*/React$1.createElement(\"div\", {\n      className: trackWrapperClassName,\n      onMouseDown: this.handleMouseDownTrack,\n      ref: this.trackWrapper\n    }, /*#__PURE__*/React$1.createElement(\"div\", {\n      className: styles.Track,\n      style: cssVars,\n      ref: this.track\n    }), /*#__PURE__*/React$1.createElement(\"div\", {\n      className: styles['Track--dashed']\n    }), /*#__PURE__*/React$1.createElement(\"div\", {\n      id: idLower,\n      className: thumbLowerClassName,\n      style: {\n        left: \"\".concat(leftPositionThumbLower, \"px\")\n      },\n      role: \"slider\",\n      \"aria-disabled\": disabled,\n      \"aria-valuemin\": min,\n      \"aria-valuemax\": max,\n      \"aria-valuenow\": value[0],\n      \"aria-invalid\": Boolean(error),\n      \"aria-describedby\": ariaDescribedBy,\n      \"aria-labelledby\": labelID(id),\n      onFocus: onFocus,\n      onBlur: onBlur,\n      tabIndex: 0,\n      onKeyDown: this.handleKeypressLower,\n      onMouseDown: this.handleMouseDownThumbLower,\n      onTouchStart: this.handleTouchStartThumbLower,\n      ref: this.thumbLower\n    }), outputMarkupLower, /*#__PURE__*/React$1.createElement(\"div\", {\n      id: idUpper,\n      className: thumbUpperClassName,\n      style: {\n        left: \"\".concat(leftPositionThumbUpper, \"px\")\n      },\n      role: \"slider\",\n      \"aria-disabled\": disabled,\n      \"aria-valuemin\": min,\n      \"aria-valuemax\": max,\n      \"aria-valuenow\": value[1],\n      \"aria-invalid\": Boolean(error),\n      \"aria-describedby\": ariaDescribedBy,\n      \"aria-labelledby\": labelID(id),\n      onFocus: onFocus,\n      onBlur: onBlur,\n      tabIndex: 0,\n      onKeyDown: this.handleKeypressUpper,\n      onMouseDown: this.handleMouseDownThumbUpper,\n      onTouchStart: this.handleTouchStartThumbUpper,\n      ref: this.thumbUpper\n    }), outputMarkupUpper), suffixMarkup)), /*#__PURE__*/React$1.createElement(EventListener$1, {\n      event: \"resize\",\n      handler: this.setTrackPosition\n    }));\n  }\n\n}\n\nDualThumb.contextType = FeaturesContext;\n\nfunction registerMouseMoveHandler(handler) {\n  document.addEventListener('mousemove', handler);\n  document.addEventListener('mouseup', () => {\n    document.removeEventListener('mousemove', handler);\n  }, {\n    once: true\n  });\n}\n\nfunction registerTouchMoveHandler(handler) {\n  var removeHandler = () => {\n    document.removeEventListener('touchmove', handler);\n    document.removeEventListener('touchend', removeHandler);\n    document.removeEventListener('touchcancel', removeHandler);\n  };\n\n  document.addEventListener('touchmove', handler, {\n    passive: false\n  });\n  document.addEventListener('touchend', removeHandler, {\n    once: true\n  });\n  document.addEventListener('touchcancel', removeHandler, {\n    once: true\n  });\n}\n\nfunction sanitizeValue(value, min, max, step, control = Control.Upper) {\n  var upperValue = inBoundsUpper(roundedToStep(value[1]));\n  var lowerValue = inBoundsLower(roundedToStep(value[0]));\n  var maxLowerValue = upperValue - step;\n  var minUpperValue = lowerValue + step;\n\n  if (control === Control.Upper && lowerValue > maxLowerValue) {\n    lowerValue = maxLowerValue;\n  } else if (control === Control.Lower && upperValue < minUpperValue) {\n    upperValue = minUpperValue;\n  }\n\n  return [lowerValue, upperValue];\n\n  function inBoundsUpper(value) {\n    var lowerMin = min + step;\n\n    if (value < lowerMin) {\n      return lowerMin;\n    } else if (value > max) {\n      return max;\n    } else {\n      return value;\n    }\n  }\n\n  function inBoundsLower(value) {\n    var upperMax = max - step;\n\n    if (value < min) {\n      return min;\n    } else if (value > upperMax) {\n      return upperMax;\n    } else {\n      return value;\n    }\n  }\n\n  function roundedToStep(value) {\n    return Math.round(value / step) * step;\n  }\n}\n\nexport { DualThumb };","map":{"version":3,"sources":["/home/bss/Downloads/shopify/create-react-app/node_modules/@shopify/polaris/dist/esm/components/RangeSlider/components/DualThumb/DualThumb.js"],"names":["Key","React$1","Component","createRef","debounce$1","EventListener","EventListener$1","FeaturesContext","classNames","isEqual$1","labelID","Labelled","Labelled$1","CSS_VAR_PREFIX","styles","Control","DualThumb","constructor","args","context","state","value","sanitizeValue","props","min","max","step","trackWidth","trackLeft","track","trackWrapper","thumbLower","thumbUpper","setTrackPosition","current","thumbSize","width","left","getBoundingClientRect","adjustedTrackWidth","adjustedTrackLeft","range","minValuePosition","setState","leading","trailing","maxWait","handleMouseDownThumbLower","event","button","disabled","registerMouseMoveHandler","handleMouseMoveThumbLower","stopPropagation","valueUpper","setValue","actualXPosition","clientX","Upper","handleTouchStartThumbLower","registerTouchMoveHandler","handleTouchMoveThumbLower","preventDefault","touches","handleMouseDownThumbUpper","handleMouseMoveThumbUpper","valueLower","Lower","handleTouchStartThumbUpper","handleTouchMoveThumbUpper","handleKeypressLower","incrementValueLower","decrementValueLower","handlerMap","UpArrow","RightArrow","DownArrow","LeftArrow","handler","keyCode","handleKeypressUpper","incrementValueUpper","decrementValueUpper","dispatchValue","onChange","id","dirtyValue","control","sanitizedValue","handleMouseDownTrack","clickXPosition","distanceFromLowerThumb","Math","abs","distanceFromUpperThumb","focus","handleTouchStartTrack","dirtyXPosition","relativeX","percentageOfTrack","getDerivedStateFromProps","prevValue","componentDidMount","addEventListener","passive","componentWillUnmount","removeEventListener","render","prefix","suffix","output","error","onFocus","onBlur","label","labelAction","labelHidden","helpText","idLower","idUpper","describedBy","push","ariaDescribedBy","length","join","undefined","trackWrapperClassName","TrackWrapper","thumbLowerClassName","Thumbs","ThumbLower","thumbUpperClassName","ThumbUpper","leftPositionThumbLower","leftPositionThumbUpper","outputLowerClassName","Output","OutputLower","outputMarkupLower","createElement","htmlFor","className","style","OutputBubble","OutputText","outputUpperClassName","OutputUpper","outputMarkupUpper","cssVars","prefixMarkup","Prefix","suffixMarkup","Suffix","Fragment","action","Wrapper","onMouseDown","ref","Track","role","Boolean","tabIndex","onKeyDown","onTouchStart","contextType","document","once","removeHandler","upperValue","inBoundsUpper","roundedToStep","lowerValue","inBoundsLower","maxLowerValue","minUpperValue","lowerMin","upperMax","round"],"mappings":"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","sourcesContent":["import { Key } from '../../../../types.js';\nimport React$1, { Component, createRef } from 'react';\nimport debounce$1 from 'lodash/debounce';\nimport { EventListener as EventListener$1 } from '../../../EventListener/EventListener.js';\nimport { FeaturesContext } from '../../../../utilities/features/context.js';\nimport { classNames } from '../../../../utilities/css.js';\nimport isEqual$1 from 'lodash/isEqual';\nimport { labelID } from '../../../Label/Label.js';\nimport { Labelled as Labelled$1 } from '../../../Labelled/Labelled.js';\nimport { CSS_VAR_PREFIX } from '../../utilities/index.js';\nimport styles from './DualThumb.scss.js';\n\nvar Control;\n\n(function (Control) {\n  Control[Control[\"Lower\"] = 0] = \"Lower\";\n  Control[Control[\"Upper\"] = 1] = \"Upper\";\n})(Control || (Control = {}));\n\nclass DualThumb extends Component {\n  constructor(...args) {\n    super(...args);\n    this.context = void 0;\n    this.state = {\n      value: sanitizeValue(this.props.value, this.props.min, this.props.max, this.props.step),\n      trackWidth: 0,\n      trackLeft: 0\n    };\n    this.track = /*#__PURE__*/createRef();\n    this.trackWrapper = /*#__PURE__*/createRef();\n    this.thumbLower = /*#__PURE__*/createRef();\n    this.thumbUpper = /*#__PURE__*/createRef();\n    this.setTrackPosition = debounce$1(() => {\n      if (this.track.current) {\n        const thumbSize = 16;\n        const {\n          width,\n          left\n        } = this.track.current.getBoundingClientRect();\n        const adjustedTrackWidth = width - thumbSize;\n        const adjustedTrackLeft = left + thumbSize / 2;\n        const range = this.props.max - this.props.min;\n        const minValuePosition = this.props.min / range * adjustedTrackWidth;\n        this.setState({\n          trackWidth: adjustedTrackWidth,\n          trackLeft: adjustedTrackLeft - minValuePosition\n        });\n      }\n    }, 40, {\n      leading: true,\n      trailing: true,\n      maxWait: 40\n    });\n\n    this.handleMouseDownThumbLower = event => {\n      if (event.button !== 0 || this.props.disabled) return;\n      registerMouseMoveHandler(this.handleMouseMoveThumbLower);\n      event.stopPropagation();\n    };\n\n    this.handleMouseMoveThumbLower = event => {\n      const valueUpper = this.state.value[1];\n      this.setValue([this.actualXPosition(event.clientX), valueUpper], Control.Upper);\n    };\n\n    this.handleTouchStartThumbLower = event => {\n      if (this.props.disabled) return;\n      registerTouchMoveHandler(this.handleTouchMoveThumbLower);\n      event.stopPropagation();\n    };\n\n    this.handleTouchMoveThumbLower = event => {\n      event.preventDefault();\n      const valueUpper = this.state.value[1];\n      this.setValue([this.actualXPosition(event.touches[0].clientX), valueUpper], Control.Upper);\n    };\n\n    this.handleMouseDownThumbUpper = event => {\n      if (event.button !== 0 || this.props.disabled) return;\n      registerMouseMoveHandler(this.handleMouseMoveThumbUpper);\n      event.stopPropagation();\n    };\n\n    this.handleMouseMoveThumbUpper = event => {\n      const valueLower = this.state.value[0];\n      this.setValue([valueLower, this.actualXPosition(event.clientX)], Control.Lower);\n    };\n\n    this.handleTouchStartThumbUpper = event => {\n      if (this.props.disabled) return;\n      registerTouchMoveHandler(this.handleTouchMoveThumbUpper);\n      event.stopPropagation();\n    };\n\n    this.handleTouchMoveThumbUpper = event => {\n      event.preventDefault();\n      const valueLower = this.state.value[0];\n      this.setValue([valueLower, this.actualXPosition(event.touches[0].clientX)], Control.Lower);\n    };\n\n    this.handleKeypressLower = event => {\n      if (this.props.disabled) return;\n      const {\n        incrementValueLower,\n        decrementValueLower\n      } = this;\n      const handlerMap = {\n        [Key.UpArrow]: incrementValueLower,\n        [Key.RightArrow]: incrementValueLower,\n        [Key.DownArrow]: decrementValueLower,\n        [Key.LeftArrow]: decrementValueLower\n      };\n      const handler = handlerMap[event.keyCode];\n\n      if (handler != null) {\n        event.preventDefault();\n        event.stopPropagation();\n        handler();\n      }\n    };\n\n    this.handleKeypressUpper = event => {\n      if (this.props.disabled) return;\n      const {\n        incrementValueUpper,\n        decrementValueUpper\n      } = this;\n      const handlerMap = {\n        [Key.UpArrow]: incrementValueUpper,\n        [Key.RightArrow]: incrementValueUpper,\n        [Key.DownArrow]: decrementValueUpper,\n        [Key.LeftArrow]: decrementValueUpper\n      };\n      const handler = handlerMap[event.keyCode];\n\n      if (handler != null) {\n        event.preventDefault();\n        event.stopPropagation();\n        handler();\n      }\n    };\n\n    this.incrementValueLower = () => {\n      this.setValue([this.state.value[0] + this.props.step, this.state.value[1]], Control.Upper);\n    };\n\n    this.decrementValueLower = () => {\n      this.setValue([this.state.value[0] - this.props.step, this.state.value[1]], Control.Upper);\n    };\n\n    this.incrementValueUpper = () => {\n      this.setValue([this.state.value[0], this.state.value[1] + this.props.step], Control.Lower);\n    };\n\n    this.decrementValueUpper = () => {\n      this.setValue([this.state.value[0], this.state.value[1] - this.props.step], Control.Lower);\n    };\n\n    this.dispatchValue = () => {\n      const {\n        onChange,\n        id\n      } = this.props;\n      const {\n        value\n      } = this.state;\n      onChange(value, id);\n    };\n\n    this.setValue = (dirtyValue, control) => {\n      const {\n        props: {\n          min,\n          max,\n          step\n        },\n        state: {\n          value\n        }\n      } = this;\n      const sanitizedValue = sanitizeValue(dirtyValue, min, max, step, control);\n\n      if (isEqual$1(sanitizedValue, value) === false) {\n        this.setState({\n          value: sanitizedValue\n        }, this.dispatchValue);\n      }\n    };\n\n    this.handleMouseDownTrack = event => {\n      if (event.button !== 0 || this.props.disabled) return;\n      event.preventDefault();\n      const clickXPosition = this.actualXPosition(event.clientX);\n      const {\n        value\n      } = this.state;\n      const distanceFromLowerThumb = Math.abs(value[0] - clickXPosition);\n      const distanceFromUpperThumb = Math.abs(value[1] - clickXPosition);\n\n      if (distanceFromLowerThumb <= distanceFromUpperThumb) {\n        this.setValue([clickXPosition, value[1]], Control.Upper);\n        registerMouseMoveHandler(this.handleMouseMoveThumbLower);\n\n        if (this.thumbLower.current != null) {\n          this.thumbLower.current.focus();\n        }\n      } else {\n        this.setValue([value[0], clickXPosition], Control.Lower);\n        registerMouseMoveHandler(this.handleMouseMoveThumbUpper);\n\n        if (this.thumbUpper.current != null) {\n          this.thumbUpper.current.focus();\n        }\n      }\n    };\n\n    this.handleTouchStartTrack = event => {\n      if (this.props.disabled) return;\n      event.preventDefault();\n      const clickXPosition = this.actualXPosition(event.touches[0].clientX);\n      const {\n        value\n      } = this.state;\n      const distanceFromLowerThumb = Math.abs(value[0] - clickXPosition);\n      const distanceFromUpperThumb = Math.abs(value[1] - clickXPosition);\n\n      if (distanceFromLowerThumb <= distanceFromUpperThumb) {\n        this.setValue([clickXPosition, value[1]], Control.Upper);\n        registerTouchMoveHandler(this.handleTouchMoveThumbLower);\n\n        if (this.thumbLower.current != null) {\n          this.thumbLower.current.focus();\n        }\n      } else {\n        this.setValue([value[0], clickXPosition], Control.Lower);\n        registerTouchMoveHandler(this.handleTouchMoveThumbUpper);\n\n        if (this.thumbUpper.current != null) {\n          this.thumbUpper.current.focus();\n        }\n      }\n    };\n\n    this.actualXPosition = dirtyXPosition => {\n      if (this.track.current) {\n        const {\n          min,\n          max\n        } = this.props;\n        const {\n          trackLeft,\n          trackWidth\n        } = this.state;\n        const relativeX = dirtyXPosition - trackLeft;\n        const percentageOfTrack = relativeX / trackWidth;\n        return percentageOfTrack * (max - min);\n      } else {\n        return 0;\n      }\n    };\n  }\n\n  static getDerivedStateFromProps(props, state) {\n    const {\n      min,\n      step,\n      max,\n      value,\n      onChange,\n      id\n    } = props;\n    const {\n      prevValue\n    } = state;\n\n    if (isEqual$1(prevValue, value)) {\n      return null;\n    }\n\n    const sanitizedValue = sanitizeValue(value, min, max, step);\n\n    if (!isEqual$1(value, sanitizedValue)) {\n      onChange(sanitizedValue, id);\n    }\n\n    return {\n      prevValue: value,\n      value: sanitizedValue\n    };\n  }\n\n  componentDidMount() {\n    this.setTrackPosition();\n\n    if (this.trackWrapper.current != null) {\n      this.trackWrapper.current.addEventListener('touchstart', this.handleTouchStartTrack, {\n        passive: false\n      });\n    }\n  }\n\n  componentWillUnmount() {\n    if (this.trackWrapper.current != null) {\n      this.trackWrapper.current.removeEventListener('touchstart', this.handleTouchStartTrack);\n    }\n  }\n\n  render() {\n    const {\n      id,\n      min,\n      max,\n      prefix,\n      suffix,\n      disabled,\n      output,\n      error,\n      onFocus,\n      onBlur,\n      label,\n      labelAction,\n      labelHidden,\n      helpText\n    } = this.props;\n    const {\n      value\n    } = this.state;\n    const idLower = id;\n    const idUpper = `${id}Upper`;\n    const describedBy = [];\n\n    if (error) {\n      describedBy.push(`${id}Error`);\n    }\n\n    const ariaDescribedBy = describedBy.length ? describedBy.join(' ') : undefined;\n    const trackWrapperClassName = classNames(styles.TrackWrapper, error && styles.error, disabled && styles.disabled);\n    const thumbLowerClassName = classNames(styles.Thumbs, styles.ThumbLower, disabled && styles.disabled);\n    const thumbUpperClassName = classNames(styles.Thumbs, styles.ThumbUpper, disabled && styles.disabled);\n    const trackWidth = this.state.trackWidth;\n    const range = max - min;\n    const minValuePosition = min / range * trackWidth;\n    const leftPositionThumbLower = value[0] / range * trackWidth - minValuePosition;\n    const leftPositionThumbUpper = value[1] / range * trackWidth - minValuePosition;\n    const outputLowerClassName = classNames(styles.Output, styles.OutputLower);\n    const outputMarkupLower = !disabled && output ? /*#__PURE__*/React$1.createElement(\"output\", {\n      htmlFor: idLower,\n      className: outputLowerClassName,\n      style: {\n        left: `${leftPositionThumbLower}px`\n      }\n    }, /*#__PURE__*/React$1.createElement(\"div\", {\n      className: styles.OutputBubble\n    }, /*#__PURE__*/React$1.createElement(\"span\", {\n      className: styles.OutputText\n    }, value[0]))) : null;\n    const outputUpperClassName = classNames(styles.Output, styles.OutputUpper);\n    const outputMarkupUpper = !disabled && output ? /*#__PURE__*/React$1.createElement(\"output\", {\n      htmlFor: idUpper,\n      className: outputUpperClassName,\n      style: {\n        left: `${leftPositionThumbUpper}px`\n      }\n    }, /*#__PURE__*/React$1.createElement(\"div\", {\n      className: styles.OutputBubble\n    }, /*#__PURE__*/React$1.createElement(\"span\", {\n      className: styles.OutputText\n    }, value[1]))) : null;\n    const cssVars = {\n      [`${CSS_VAR_PREFIX}progress-lower`]: `${leftPositionThumbLower}px`,\n      [`${CSS_VAR_PREFIX}progress-upper`]: `${leftPositionThumbUpper}px`\n    };\n    const prefixMarkup = prefix && /*#__PURE__*/React$1.createElement(\"div\", {\n      className: styles.Prefix\n    }, prefix);\n    const suffixMarkup = suffix && /*#__PURE__*/React$1.createElement(\"div\", {\n      className: styles.Suffix\n    }, suffix);\n    return /*#__PURE__*/React$1.createElement(React$1.Fragment, null, /*#__PURE__*/React$1.createElement(Labelled$1, {\n      id: id,\n      label: label,\n      error: error,\n      action: labelAction,\n      labelHidden: labelHidden,\n      helpText: helpText\n    }, /*#__PURE__*/React$1.createElement(\"div\", {\n      className: styles.Wrapper\n    }, prefixMarkup, /*#__PURE__*/React$1.createElement(\"div\", {\n      className: trackWrapperClassName,\n      onMouseDown: this.handleMouseDownTrack,\n      ref: this.trackWrapper\n    }, /*#__PURE__*/React$1.createElement(\"div\", {\n      className: styles.Track,\n      style: cssVars,\n      ref: this.track\n    }), /*#__PURE__*/React$1.createElement(\"div\", {\n      className: styles['Track--dashed']\n    }), /*#__PURE__*/React$1.createElement(\"div\", {\n      id: idLower,\n      className: thumbLowerClassName,\n      style: {\n        left: `${leftPositionThumbLower}px`\n      },\n      role: \"slider\",\n      \"aria-disabled\": disabled,\n      \"aria-valuemin\": min,\n      \"aria-valuemax\": max,\n      \"aria-valuenow\": value[0],\n      \"aria-invalid\": Boolean(error),\n      \"aria-describedby\": ariaDescribedBy,\n      \"aria-labelledby\": labelID(id),\n      onFocus: onFocus,\n      onBlur: onBlur,\n      tabIndex: 0,\n      onKeyDown: this.handleKeypressLower,\n      onMouseDown: this.handleMouseDownThumbLower,\n      onTouchStart: this.handleTouchStartThumbLower,\n      ref: this.thumbLower\n    }), outputMarkupLower, /*#__PURE__*/React$1.createElement(\"div\", {\n      id: idUpper,\n      className: thumbUpperClassName,\n      style: {\n        left: `${leftPositionThumbUpper}px`\n      },\n      role: \"slider\",\n      \"aria-disabled\": disabled,\n      \"aria-valuemin\": min,\n      \"aria-valuemax\": max,\n      \"aria-valuenow\": value[1],\n      \"aria-invalid\": Boolean(error),\n      \"aria-describedby\": ariaDescribedBy,\n      \"aria-labelledby\": labelID(id),\n      onFocus: onFocus,\n      onBlur: onBlur,\n      tabIndex: 0,\n      onKeyDown: this.handleKeypressUpper,\n      onMouseDown: this.handleMouseDownThumbUpper,\n      onTouchStart: this.handleTouchStartThumbUpper,\n      ref: this.thumbUpper\n    }), outputMarkupUpper), suffixMarkup)), /*#__PURE__*/React$1.createElement(EventListener$1, {\n      event: \"resize\",\n      handler: this.setTrackPosition\n    }));\n  }\n\n}\nDualThumb.contextType = FeaturesContext;\n\nfunction registerMouseMoveHandler(handler) {\n  document.addEventListener('mousemove', handler);\n  document.addEventListener('mouseup', () => {\n    document.removeEventListener('mousemove', handler);\n  }, {\n    once: true\n  });\n}\n\nfunction registerTouchMoveHandler(handler) {\n  const removeHandler = () => {\n    document.removeEventListener('touchmove', handler);\n    document.removeEventListener('touchend', removeHandler);\n    document.removeEventListener('touchcancel', removeHandler);\n  };\n\n  document.addEventListener('touchmove', handler, {\n    passive: false\n  });\n  document.addEventListener('touchend', removeHandler, {\n    once: true\n  });\n  document.addEventListener('touchcancel', removeHandler, {\n    once: true\n  });\n}\n\nfunction sanitizeValue(value, min, max, step, control = Control.Upper) {\n  let upperValue = inBoundsUpper(roundedToStep(value[1]));\n  let lowerValue = inBoundsLower(roundedToStep(value[0]));\n  const maxLowerValue = upperValue - step;\n  const minUpperValue = lowerValue + step;\n\n  if (control === Control.Upper && lowerValue > maxLowerValue) {\n    lowerValue = maxLowerValue;\n  } else if (control === Control.Lower && upperValue < minUpperValue) {\n    upperValue = minUpperValue;\n  }\n\n  return [lowerValue, upperValue];\n\n  function inBoundsUpper(value) {\n    const lowerMin = min + step;\n\n    if (value < lowerMin) {\n      return lowerMin;\n    } else if (value > max) {\n      return max;\n    } else {\n      return value;\n    }\n  }\n\n  function inBoundsLower(value) {\n    const upperMax = max - step;\n\n    if (value < min) {\n      return min;\n    } else if (value > upperMax) {\n      return upperMax;\n    } else {\n      return value;\n    }\n  }\n\n  function roundedToStep(value) {\n    return Math.round(value / step) * step;\n  }\n}\n\nexport { DualThumb };\n"]},"metadata":{},"sourceType":"module"}